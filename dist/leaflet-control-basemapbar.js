L.Control.BasemapBar=L.Control.extend({options:{position:"topright"},initialize:function(e){if(!e.layers||!Array.isArray(e.layers))throw"L.Control.BasemapBar: missing layers list";L.setOptions(this,e),this.buttons={},this.map=null},onAdd:function(e){this.map=e,this._layers={};for(var t=0,a=this.options.layers.length;a>t;t++){var o=this.options.layers[t];switch(o.label=o.label.toLowerCase(),o.type){case"xyz":this._layers[o.label]=L.tileLayer(o.url,{attribution:o.attribution});break;case"google":switch(o.url){case"satellite":this._layers[o.label]=new L.Google("SATELLITE",{zIndex:-1});break;case"hybrid":this._layers[o.label]=new L.Google("HYBRID",{zIndex:-1});break;case"streets":this._layers[o.label]=new L.Google("ROADMAP",{zIndex:-1});break;case"terrain":this._layers[o.label]=new L.Google("TERRAIN",{zIndex:-1})}break;case"bing":switch(o.url){case"aerial":this._layers[o.label]=new L.BingLayer(o.apikey,{zIndex:-1,type:"Aerial"});break;case"street":this._layers[o.label]=new L.BingLayer(o.apikey,{zIndex:-1,type:"Road"});break;default:throw"L.Control.BasemapBar: Unknown Bing subtype ("+o.url+") Must be: street, aerial"}break;default:throw"L.Control.BasemapBar: Unknown layer 'type' ("+o.type+") Must be: xyz, bing, google"}}for(var s=L.DomUtil.create("div","leaflet-control-basemapbar"),t=0,a=this.options.layers.length;a>t;t++){var r=this.options.layers[t].label,i=this.options.layers[t].tooltip?this.options.layers[t].tooltip:"",l=L.DomUtil.create("div","leaflet-control-basemapbar-option",s);l.control=this,l.innerHTML=r.toUpperCase(),l.title=i,l["data-layer"]=r,L.DomEvent.addListener(l,"mousedown",L.DomEvent.stopPropagation).addListener(l,"click",L.DomEvent.stopPropagation).addListener(l,"click",L.DomEvent.preventDefault).addListener(l,"click",function(){this.control.selectLayer(this["data-layer"])}),this.buttons[r]=l}return this.closer=L.DomUtil.create("div","leaflet-control-basemapbar-close",s),this.closer.innerHTML="&gt;",this.closer.title="Hide basemap selector",this.closer.control=this,L.DomEvent.addListener(this.closer,"mousedown",L.DomEvent.stopPropagation).addListener(this.closer,"click",L.DomEvent.stopPropagation).addListener(this.closer,"click",L.DomEvent.preventDefault).addListener(this.closer,"click",function(){this.control.collapseUI()}),this.opener=L.DomUtil.create("div","leaflet-control-basemapbar-open",s),this.opener.innerHTML="&gt; Base Maps",this.opener.title="Show options for the base map",this.opener.control=this,L.DomEvent.addListener(this.opener,"mousedown",L.DomEvent.stopPropagation).addListener(this.opener,"click",L.DomEvent.stopPropagation).addListener(this.opener,"click",L.DomEvent.preventDefault).addListener(this.opener,"click",function(){this.control.expandUI()}),this.collapseUI(),s},selectLayer:function(e){for(var t in this.buttons){var a=this.buttons[t];t==e?(L.DomUtil.addClass(a,"leaflet-control-basemapbar-option-active"),this.map.addLayer(this._layers[t],!0)):(L.DomUtil.removeClass(a,"leaflet-control-basemapbar-option-active"),this.map.removeLayer(this._layers[t]))}return this},whichLayer:function(){for(var e in this.buttons){var t=this.buttons[e];if(L.DomUtil.hasClass(t,"leaflet-control-basemapbar-option-active"))return e}return null},collapseUI:function(){for(var e in this.buttons){var t=this.buttons[e];L.DomUtil.addClass(t,"leaflet-control-basemapbar-hidden")}return L.DomUtil.addClass(this.closer,"leaflet-control-basemapbar-hidden"),L.DomUtil.removeClass(this.opener,"leaflet-control-basemapbar-hidden"),this},expandUI:function(){for(var e in this.buttons){var t=this.buttons[e];L.DomUtil.removeClass(t,"leaflet-control-basemapbar-hidden")}return L.DomUtil.removeClass(this.closer,"leaflet-control-basemapbar-hidden"),L.DomUtil.addClass(this.opener,"leaflet-control-basemapbar-hidden"),this}});